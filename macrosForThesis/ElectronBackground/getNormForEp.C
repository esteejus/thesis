
#include "getGausNorm.C"

void getNormForEp()
{

  //e+
 TF1 *total = new TF1("total","[0]*TMath::Gaus(x,[1],[2])",-500, 0);
 total->SetParameters(6.55775e+02,-2.78860e+02,1.59593e+02);

  TF1 *sigma = new TF1("sigma","[0] + [1]*x + [2]*pow(x,2) + [3]*pow(x,3)",-500,0);
  sigma->SetParameters(0.148491,0.00059832,1.69265e-06,1.5452e-09);

  TF1 *mean = new TF1("mean","[0] + [1]*x + [2]*pow(x,2) + [3]*pow(x,3) + [4]*pow(x,4) + [5]*pow(x,5) + [6]*pow(x,6) + [7]*pow(x,7) + [8]*pow(x,8)",-500,0);
  mean->SetParameters(-5.5843,-0.131102,-0.00155294,-1.17224e-05,-5.71558e-08,-1.77215e-10,-3.35297e-13,-3.51656e-16,-1.56314e-19);
  
  vector<double> center = {30,50,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,114,118,122,126,130,134,138,145,155,165,175,185,195,205,212.5,217.5,222.5,227.5,232.5,237.5,242.5,247.5,252.5,257.5,262.5,267.5,271,273,275,277,279,281,283,285,287,289,291,293,295,297,299,301,303,305,307,309,311,313,315,317,319,321,323,325,327,329,331,333,335,337,339,341,343,345,347,349,351,353,355,357,359,361,363,365,367,369,371,373,375,377,379,381,383,385,387,389,391,393,395,397,399,401,403,405,407,409,411,413,415,417,419,421,423,425,427,429,431,433,435,437,439,441,443,445,447,449,451,453,457,462.5,467.5,472.5,477.5,482.5,487.5,492.5,497.5,502.5,507.5,512.5,517.5,522.5,550,600};
  
    vector<double> binw = {20,20,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,10,10,10,10,10,10,10,5,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,6,5,5,5,5,5,5,5,5,5,5,5,5,5,50,50};


  cout<<center.size()<<" "<<binw.size()<<endl;
 cout<<"norm "<<endl;

 for(int i = 0; i < center.size(); i++)
   {
     double x = center.at(i);
     double sigma_v = sigma->Eval(-x);
     double mean_v  = mean->Eval(-x);
     double total_v = total->Eval(x);
     //     cout<<"diff "<<total_v - norm.at(i)<<endl;
     double norm = getGausNorm(total_v*binw.at(i),mean_v,sigma_v);
     cout<<x<<"\t"<<norm<<"\t"<<mean_v<<"\t"<<sigma_v<<endl;
     //     cout<<x<<"\t"<<norm<<"\t"<<mean_v<<"\t"<<sigma_v<<"\t"<<total_v*binw.at(i)<<endl;
     //cout<<center.at(i)<<" "<<total_v*binw.at(i)<<endl;
     //cout<<x<<" "<< norm<<endl;     
   }



}
